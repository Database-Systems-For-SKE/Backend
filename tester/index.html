<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Example Query</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    <style>
        textarea {
            resize: vertical;
        }
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
</head>
<body>
<!-- java script -->
<script>
    $(document).ready(function () {
        $("#submit").click(function () {
            var method = $("input[name='method']:checked").val();
            console.log(method);

            var link = $("#link").val();
            var body = $("#query").val();

            if (link === null || link === "") {
                alert("don't have link.");
                return;
            }

            var request = $.ajax({
                method: method,
                url: link,
                // dataType: "json",
                data: body
            });

            // complete /* response is JSON object */
            request.done(function (response, status, xhr) {
                try {
                    $("#1").val(JSON.stringify(response, null, 4)).attr('rows', JSON.stringify(response, null, 4).split("\n").length);

                    $("#3").val("");
                }
                catch (err) {
                    $("#1").val(response).attr('rows', response.split("\n").length);
                    $("#3").val("response message isn't JSON format");
                }
                $("#2").val(status);

                console.log(xhr); // debug
            });

            // failure
            request.fail(function (xhr, status, error) {
                $("#1").val(xhr.responseText).attr('rows', xhr.responseText.split("\n").length);
                $("#2").val(status);
                $("#3").val(error + " (" + xhr.status + ")");
                console.log(xhr); // debug
            });
        });

        $("#query").on("keydown", function (e) {
            var keyCode = e.keyCode || e.which;
            if (keyCode === 9) {
                e.preventDefault();
                var start = this.selectionStart;
                var end = this.selectionEnd;
                var val = this.value;
                var selected = val.substring(start, end);
                var re = /^/gm;
                var count = selected.match(re).length;

                this.value = val.substring(0, start) + selected.replace(re, '\t') + val.substring(end);
                this.selectionStart = end + count;
                this.selectionEnd = end + count;
            }
        });
    })
    ;
</script>

<!-- html -->
<form class="form-horizontal">
    <div class="form-group">
        <label for="radio" class="col-sm-2 control-label">Method</label>
        <div id="radio">
            <label class="radio-inline">
                <input type="radio" name="method" value="GET" checked> GET
            </label>
            <label class="radio-inline">
                <input type="radio" name="method" value="POST"> POST
            </label>
        </div>
    </div>
    <div class="form-group form-group-lg">
        <label for="query" class="col-sm-2 control-label">Link: </label>
        <div class="col-sm-9 col-md-9 col-lg-9">
            <input class="form-control" type="text" id="link" placeholder="link...">
        </div>
    </div>
    <div class="form-group">
        <label for="query" class="col-sm-2 control-label">Parameter/Body: </label>
        <div class="col-sm-9 col-md-9 col-lg-9">
            <textarea id="query" class="form-control" rows="4" placeholder="data(json)"></textarea>
        </div>
    </div>
    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10 col-md-10 col-lg-10">
            <button id="submit" class="btn btn-default" type='button'>Fetch!</button>
        </div>
    </div>
    <div class="form-group form-group-lg">
        <label for="query" class="col-sm-2 control-label">Response Message: </label>
        <div class="col-sm-9 col-md-9 col-lg-9">
            <label for="1"></label><textarea rows="4" class="form-control" id="1" disabled></textarea>
        </div>
    </div>
    <div class="form-group form-group-lg">
        <label for="query" class="col-sm-2 control-label">Status: </label>
        <div class="col-sm-9 col-md-9 col-lg-9">
            <label for="2"></label><textarea class="form-control" id="2" disabled></textarea>
        </div>
    </div>
    <div class="form-group form-group-lg">
        <label for="query" class="col-sm-2 control-label">Error: </label>
        <div class="col-sm-9 col-md-9 col-lg-9">
            <label for="3"></label><textarea class="form-control" id="3" disabled></textarea>
        </div>
    </div>
</form>
</body>
</html>